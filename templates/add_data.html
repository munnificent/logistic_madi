{% extends "base.html" %}
{% block content %}
<h2>Добавить данные</h2>

<form method="POST">
    <p>Выберите, что добавлять:</p>
    <select name="data_type" required>
        <option value="train">Новый поезд</option>
        <option value="cargo">Новый груз</option>
    </select>
    <hr>

    <div id="train_fields">
        <label>Название (номер) поезда:</label><br>
        <input type="text" name="name"><br><br>

        <label>Начальная станция:</label><br>
        <input type="text" name="departure_station"><br><br>

        <label>Конечная станция:</label><br>
        <input type="text" name="arrival_station"><br><br>

        <label>Время отправления:</label><br>
        <input type="text" name="departure_time" placeholder="2025-04-01 10:00"><br><br>

        <label>Время прибытия:</label><br>
        <input type="text" name="arrival_time" placeholder="2025-04-02 18:00"><br><br>
    </div>

    <div id="cargo_fields">
        <label>Тип груза:</label><br>
        <input type="text" name="cargo_type"><br><br>

        <label>ID поезда (train_id):</label><br>
        <input type="number" name="train_id"><br><br>

        <label>Текущая станция:</label><br>
        <input type="text" name="current_station"><br><br>

        <label>Статус (В пути, ожидание и т.д.):</label><br>
        <input type="text" name="status"><br><br>

        <label>Время последней остановки:</label><br>
        <input type="text" name="last_stop_time" placeholder="2025-04-01 12:30"><br><br>
    </div>
    
    <button type="submit">Сохранить</button>
</form>

<script>
    // Простейший скрипт для показа/скрытия полей в зависимости от выбора
    const dataTypeSelect = document.querySelector('select[name="data_type"]');
    const trainFields = document.getElementById('train_fields');
    const cargoFields = document.getElementById('cargo_fields');

    function toggleFields() {
        if (dataTypeSelect.value === 'train') {
            trainFields.style.display = 'block';
            cargoFields.style.display = 'none';
        } else {
            trainFields.style.display = 'none';
            cargoFields.style.display = 'block';
        }
    }

    dataTypeSelect.addEventListener('change', toggleFields);
    // Инициализация
    toggleFields();
</script>

{% endblock %}
